# GitHub 同步配置说明

## 如何配置 GitHub 同步

### 第一步：创建 GitHub Personal Access Token

1. 登录你的 GitHub 账号
2. 点击右上角头像 → Settings（设置）
3. 左侧菜单最下方 → Developer settings（开发者设置）
4. 点击 Personal access tokens → Tokens (classic)
5. 点击 Generate new token → Generate new token (classic)
6. 填写信息：
   - Note（备注）：填写 "药品索引系统"
   - Expiration（过期时间）：选择 No expiration（永不过期）或自定义
   - 勾选权限：**repo**（完整的仓库访问权限）
7. 点击最下方的 Generate token
8. **重要**：复制生成的 token（只显示一次，请妥善保存）

### 第二步：修改 app.js 配置

打开 `app.js` 文件，找到开头的配置部分：

```javascript
const GITHUB_CONFIG = {
    owner: 'YOUR_GITHUB_USERNAME',        // 改成你的 GitHub 用户名
    repo: 'YOUR_REPO_NAME',               // 改成你的仓库名
    token: 'YOUR_GITHUB_TOKEN',           // 粘贴刚才复制的 token
    dataFile: 'medicines.json',           // 数据文件名（不用改）
    branch: 'main'                        // 分支名（不用改）
};
```

**示例：**
```javascript
const GITHUB_CONFIG = {
    owner: 'zhangsan',                    // 你的 GitHub 用户名
    repo: 'medicine-system',              // 你的仓库名
    token: 'ghp_xxxxxxxxxxxxxxxxxxxx',    // 你的 token
    dataFile: 'medicines.json',
    branch: 'main'
};
```

### 第三步：上传文件到 GitHub

1. 在 GitHub 创建一个新仓库（Repository）
2. 将以下文件上传到仓库：
   - `index.html`
   - `app.js`（已修改配置的版本）
   - `medicines.json`
   - `README.md`

### 第四步：使用系统

1. 直接打开 `index.html` 文件（或通过 GitHub Pages 访问）
2. 药师端上传的数据会自动保存到 GitHub 的 `medicines.json`
3. 护士端会自动从 GitHub 读取最新数据
4. 系统每 30 秒自动同步一次

## 工作原理

```
药师端上传药品
    ↓
保存到本地缓存
    ↓
自动上传到 GitHub (medicines.json)
    ↓
护士端自动同步
    ↓
显示最新数据
```

## 注意事项

1. **Token 安全**：不要将包含真实 token 的 app.js 公开分享
2. **图片大小**：建议上传小于 2MB 的图片，避免文件过大
3. **同步频率**：系统每 30 秒自动同步一次
4. **网络要求**：需要能访问 GitHub API

## 常见问题

### Q: 为什么数据没有同步？
A: 检查：
- GitHub token 是否正确配置
- 网络是否能访问 GitHub
- 浏览器控制台是否有错误信息（按 F12 查看）

### Q: 可以在手机上使用吗？
A: 可以！只要手机浏览器能访问网页即可

### Q: 多个设备同时使用会冲突吗？
A: 系统会自动处理冲突，后上传的数据会覆盖之前的

### Q: 数据会丢失吗？
A: 数据保存在 GitHub 上，非常安全。即使本地缓存清除，也会从 GitHub 重新同步

## 可选：使用 GitHub Pages 部署

如果想通过网址访问（而不是打开本地文件）：

1. 在 GitHub 仓库页面，点击 Settings
2. 左侧菜单找到 Pages
3. Source 选择 main 分支
4. 点击 Save
5. 等待几分钟，会生成一个网址，如：`https://你的用户名.github.io/仓库名/`

这样就可以在任何设备通过网址访问了！
